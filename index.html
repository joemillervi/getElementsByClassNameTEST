<body>
  <div class="test">test1</div>
  <div class="test2">test2</div>
  <div class="blah">blah</div>
  <div class="test3">test3
    <div class="test">innerTest
      <div class="test">innerInnerTest</div>
    </div>
  </div>
  <div class="test6"></div>
</body>

<script>
// Don't extend DOM IRL
var getElementsByClassName2 = function(className) {
  return Array.prototype.reduce.call(this.children, function(matchedElements, element) {
    return matchedElements.concat(element.getElementsByClassName2(className));
  }, this.className === className ? [this] : []);
};

HTMLElement.prototype.getElementsByClassName2 = getElementsByClassName2;
document.getElementsByClassName2 = getElementsByClassName2;

console.log(document.getElementsByClassName2('test'));

</script>
